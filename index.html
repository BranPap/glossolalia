<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Glossolalia</title>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <script src="devTesting/vocabNew.js"></script>
  <link href="experiment.css" rel="stylesheet" type="text/css" />
</head>

<body class="homepage">

  <header>
    <h1>Glossolalia</h1>
    <h2>Speak in new tongues!</h2>
    <nav>
      <a href="https://glossolalia.app">Home</a> |
      <a href="development.html">Development Notes</a>
    </nav>
  </header>

  <main class="homepage">
    <p><strong>Glossolalia</strong> is a repository of free, open-source language learning exercises built with <a href="https://www.jspsych.org">jsPsych</a> by <a href="https://www.branpap.com">Bran[don] Papineau</a>.<br></p>

    <p>Select your settings below and start a session:</p>

    <div>
      <label for="currentTopic">Topic:</label>
      <select id="currentTopic">
        <option value="animals">Animals</option>
      </select>
    </div>

    <div>
      <label for="baseLang">Source (Native):</label>
      <select id="baseLang">
        <option value="English">English</option>
        <option value="Cornish">Cornish</option>
        <option value="Finnish">Finnish</option>
        <option value="Polish">Polish</option>
        <option value="Spanish">Spanish</option>
      </select>
    </div>

    <div>
      <label for="targetLang">Target:</label>
      <select id="targetLang">
        <option value="Cornish">Cornish</option>
        <option value="Finnish">Finnish</option>
        <option value="Polish">Polish</option>
        <option value="Spanish">Spanish</option>
        <option value="English">English</option>
      </select>
    </div>

    <p id="countDisplay">Available items: 0</p>

    <button id="startExercise" class="jspsych-btn">Learn</button>
    <button id="startMemoryGame" class="jspsych-btn" onclick="window.location.href='devTesting/memoryCard.html'">Memory Game</button>

    <hr>

    <footer>
      maintained with ðŸ’œ + <code>jsPsych</code><br>
      by <a href="https://www.branpap.com">Bran[don] Papineau</a> Â· <a href="https://www.jspsych.org">jspsych.org</a>
      <p style="font-size: small; margin-top: 0.5rem;">with images by Rachel Downs</p>
    </footer>
  </main>

  <script>
    // Start exercise
    document.getElementById("startExercise").onclick = function() {
      const baseLang = document.getElementById("baseLang").value;
      const targetLang = document.getElementById("targetLang").value;
      const topic = document.getElementById("currentTopic").value;
      const url = `devTesting/vocabLearnDev.html?lang=${baseLang}&target=${targetLang}&topic=${topic}`;

      if (baseLang === targetLang) {
        alert("Please select different languages for source and target.");
        return;
      }

      window.location.href = url;
    };

    document.getElementById("startMemoryGame").onclick = function() {
      const baseLang = document.getElementById("baseLang").value;
      const targetLang = document.getElementById("targetLang").value;
      const topic = document.getElementById("currentTopic").value;
      const url = `devTesting/memoryCard.html?lang=${baseLang}&target=${targetLang}&topic=${topic}`;

      if (baseLang === targetLang) {
        alert("Please select different languages for source and target.");
        return;
      }

      window.location.href = url;
    };

    // Update available count
    const baseSelect = document.getElementById("baseLang");
    const targetSelect = document.getElementById("targetLang");
    const topicSelect = document.getElementById("currentTopic");
    const countDisplay = document.getElementById("countDisplay");

    function updateCount() {
      const baseLanguage = baseSelect.value;
      const targetLanguage = targetSelect.value;
      const currentTopic = topicSelect.value;
      const filteredData = nounVocav[currentTopic].filter(
        item => item.data[targetLanguage] && item.data[baseLanguage]
      );
      countDisplay.textContent = `Available items: ${filteredData.length}`;
    }

    baseSelect.addEventListener("change", updateCount);
    targetSelect.addEventListener("change", updateCount);
    topicSelect.addEventListener("change", updateCount);
    updateCount();
  </script>

</body>
</html>
